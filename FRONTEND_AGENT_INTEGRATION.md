# å‰ç«¯ Agent é›†æˆå®Œæˆ

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

### 1. ä¿®æ”¹æ–‡ä»¶
- **æ–‡ä»¶**: `pages/qa_system.py`
- **ä¿®æ”¹å†…å®¹**: æ·»åŠ äº† Agent æ™ºèƒ½åˆ†æåŠŸèƒ½

### 2. æ–°å¢åŠŸèƒ½

#### ğŸ” åŸæœ‰çš„"æé—®"æŒ‰é’®
- **åŠŸèƒ½**: å¿«é€ŸæŸ¥è¯¢
- **æ¥å£**: ä½¿ç”¨åŸæœ‰çš„ RAG ç³»ç»Ÿ
- **ç‰¹ç‚¹**: é€Ÿåº¦å¿«,ç®€å•ç›´æ¥

#### ğŸ¤– æ–°çš„"Agent æ™ºèƒ½åˆ†æ"æŒ‰é’®
- **åŠŸèƒ½**: æ·±åº¦åˆ†æ
- **æ¥å£**: è°ƒç”¨ `/agent/query` API
- **ç‰¹ç‚¹**: ç»“æ„åŒ–è¾“å‡º,ä¸“ä¸šåˆ†æ

#### ğŸ“Š æ–°çš„"ç”ŸæˆæŠ¥å‘Š"æŒ‰é’®
- **åŠŸèƒ½**: ç”Ÿæˆå®Œæ•´å¹´æŠ¥åˆ†æ
- **æ¥å£**: è°ƒç”¨ `/agent/generate-report` API
- **ç‰¹ç‚¹**: å®Œæ•´çš„äº”ç« èŠ‚æŠ¥å‘Š

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æ­¥éª¤ 1: å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
cd llamareport-backend
python main.py
```

ç¡®ä¿åç«¯åœ¨ `http://localhost:8000` è¿è¡Œã€‚

### æ­¥éª¤ 2: å¯åŠ¨å‰ç«¯

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
streamlit run app.py
```

### æ­¥éª¤ 3: ä½¿ç”¨ Agent åŠŸèƒ½

1. è¿›å…¥"æ™ºèƒ½é—®ç­”"é¡µé¢
2. ä¸Šä¼ å¹¶å¤„ç† PDF æ–‡æ¡£
3. åœ¨é—®é¢˜æ¡†ä¸­è¾“å…¥é—®é¢˜
4. ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®ä¹‹ä¸€:
   - **ğŸ” æé—®**: å¿«é€ŸæŸ¥è¯¢
   - **ğŸ¤– Agent æ™ºèƒ½åˆ†æ**: æ·±åº¦åˆ†æ
   - **ğŸ“Š ç”ŸæˆæŠ¥å‘Š**: å®Œæ•´æŠ¥å‘Š

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æé—® | Agent æ™ºèƒ½åˆ†æ | ç”ŸæˆæŠ¥å‘Š |
|------|------|---------------|---------|
| é€Ÿåº¦ | å¿« (5-10ç§’) | ä¸­ç­‰ (10-30ç§’) | æ…¢ (2-5åˆ†é’Ÿ) |
| è¾“å‡ºæ ¼å¼ | çº¯æ–‡æœ¬ | Markdown ç»“æ„åŒ– | å®Œæ•´ Markdown æŠ¥å‘Š |
| æ·±åº¦ | ç®€å•å›ç­” | æ·±åº¦åˆ†æ | å…¨é¢åˆ†æ |
| é€‚ç”¨åœºæ™¯ | å¿«é€ŸæŸ¥è¯¢ | ä¸“ä¸šåˆ†æ | å®Œæ•´æŠ¥å‘Š |

---

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### æŒ‰é’®å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æé—®    â”‚ ğŸ¤– Agent æ™ºèƒ½åˆ†æ   â”‚ ğŸ“Š ç”ŸæˆæŠ¥å‘Š â”‚ ğŸ—‘ï¸ æ¸…ç©º â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent è¾“å‡ºç¤ºä¾‹

```markdown
## å¤©åŸŸç”Ÿæ€ç¯å¢ƒè‚¡ä»½æœ‰é™å…¬å¸ä¸»è¦ä¸šåŠ¡

### 1. ç”Ÿæ€å†œç‰§é£Ÿå“ä¸šåŠ¡
- ç”ŸçŒªå…»æ®–
- å†œäº§å“é”€å”®

### 2. ç”Ÿæ€èƒ½æºä¸šåŠ¡
- åˆ†å¸ƒå¼å…‰ä¼ç”µç«™
- å…¶ä»–ç”Ÿæ€èƒ½æºé¡¹ç›®

### 3. ç”Ÿæ€ç¯å¢ƒä¸šåŠ¡
- å›­æ—ç”Ÿæ€å·¥ç¨‹
- ç”°å›­ç»¼åˆä½“
- è‹—æœ¨ç§æ¤

**ä¸šåŠ¡ç‰¹è‰²ï¼š**
å…¬å¸ä»¥"ç”Ÿæ€"ä¸ºæ ¸å¿ƒï¼Œæ¨åŠ¨å„ä¸šåŠ¡æ¿å—ååŒå‘å±•...
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. Agent æŸ¥è¯¢å‡½æ•°

```python
def ask_question_with_agent(question, company_filter, doc_type_filter, year_filter):
    """ä½¿ç”¨ Agent ç³»ç»Ÿè¿›è¡Œæ™ºèƒ½åˆ†æ"""
    import requests
    
    backend_url = os.getenv("BACKEND_URL", "http://localhost:8000")
    response = requests.post(
        f"{backend_url}/agent/query",
        json={"question": question},
        timeout=60
    )
    
    if response.status_code == 200:
        result = response.json()
        if result.get("status") == "success":
            st.markdown(result.get("answer", ""))
```

### 2. æŠ¥å‘Šç”Ÿæˆå‡½æ•°

```python
def generate_full_report(company_filter, year_filter):
    """ç”Ÿæˆå®Œæ•´çš„å¹´æŠ¥åˆ†ææŠ¥å‘Š"""
    import requests
    
    backend_url = os.getenv("BACKEND_URL", "http://localhost:8000")
    response = requests.post(
        f"{backend_url}/agent/generate-report",
        json={
            "company_name": company_name,
            "year": year,
            "save_to_file": True
        },
        timeout=600
    )
    
    if response.status_code == 200:
        result = response.json()
        if result.get("status") == "success":
            st.markdown(result.get("report", ""))
            st.download_button(
                label="ğŸ’¾ ä¸‹è½½æŠ¥å‘Š",
                data=result.get("report", ""),
                file_name=f"{company_name}_{year}_å¹´æŠ¥åˆ†æ.md",
                mime="text/markdown"
            )
```

---

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env` æ–‡ä»¶ä¸­é…ç½®äº†åç«¯ URL (å¯é€‰):

```env
BACKEND_URL=http://localhost:8000
```

å¦‚æœä¸é…ç½®,é»˜è®¤ä½¿ç”¨ `http://localhost:8000`ã€‚

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: "æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨"

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿åç«¯æ­£åœ¨è¿è¡Œ: `python main.py`
2. æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®: `http://localhost:8000`
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### é—®é¢˜ 2: "è¯·æ±‚è¶…æ—¶"

**è§£å†³æ–¹æ¡ˆ**:
1. Agent åˆ†æéœ€è¦æ—¶é—´,è¯·è€å¿ƒç­‰å¾…
2. å¦‚æœè¶…æ—¶,å¯ä»¥å¢åŠ  `timeout` å‚æ•°
3. æ£€æŸ¥åç«¯æ—¥å¿—æŸ¥çœ‹é”™è¯¯

### é—®é¢˜ 3: "Agent åˆ†æå¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥åç«¯æ—¥å¿—: `llamareport-backend/llamareport-backend.log`
2. ç¡®ä¿ API Keys å·²é…ç½®
3. ç¡®ä¿æ–‡æ¡£å·²æ­£ç¡®å¤„ç†

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å¿«é€ŸæŸ¥è¯¢

1. è¾“å…¥é—®é¢˜: "å…¬å¸çš„è¥ä¸šæ”¶å…¥æ˜¯å¤šå°‘?"
2. ç‚¹å‡» "ğŸ” æé—®"
3. è·å¾—ç®€å•ç­”æ¡ˆ

### ç¤ºä¾‹ 2: æ·±åº¦åˆ†æ

1. è¾“å…¥é—®é¢˜: "å…¬å¸çš„ä¸»è¦ä¸šåŠ¡æ˜¯ä»€ä¹ˆ?"
2. ç‚¹å‡» "ğŸ¤– Agent æ™ºèƒ½åˆ†æ"
3. è·å¾—ç»“æ„åŒ–çš„æ·±åº¦åˆ†æ

### ç¤ºä¾‹ 3: ç”Ÿæˆå®Œæ•´æŠ¥å‘Š

1. é€‰æ‹©å…¬å¸å’Œå¹´ä»½
2. ç‚¹å‡» "ğŸ“Š ç”ŸæˆæŠ¥å‘Š"
3. ç­‰å¾… 2-5 åˆ†é’Ÿ
4. ä¸‹è½½å®Œæ•´çš„ Markdown æŠ¥å‘Š

---

## ğŸ‰ æ€»ç»“

### âœ… å·²å®ç°çš„åŠŸèƒ½

1. âœ… åœ¨å‰ç«¯æ·»åŠ äº† Agent æ™ºèƒ½åˆ†ææŒ‰é’®
2. âœ… åœ¨å‰ç«¯æ·»åŠ äº†ç”ŸæˆæŠ¥å‘ŠæŒ‰é’®
3. âœ… å®ç°äº†ä¸åç«¯ Agent API çš„é›†æˆ
4. âœ… æ”¯æŒ Markdown æ ¼å¼çš„ç»“æ„åŒ–è¾“å‡º
5. âœ… æä¾›æŠ¥å‘Šä¸‹è½½åŠŸèƒ½

### ğŸš€ ä¸‹ä¸€æ­¥

1. æµ‹è¯• Agent åŠŸèƒ½
2. æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–
3. æ·»åŠ æ›´å¤š Agent åŠŸèƒ½(å¦‚ç”Ÿæˆå•ä¸ªç« èŠ‚)

---

**ç°åœ¨ä½ å¯ä»¥åœ¨å‰ç«¯ç•Œé¢ä¸­çœ‹åˆ°å¹¶ä½¿ç”¨ Agent æ™ºèƒ½åˆ†æåŠŸèƒ½äº†!** ğŸŠ

