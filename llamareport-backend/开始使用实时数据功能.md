# 🚀 开始使用实时数据功能

## ⚡ 三步快速开始

### 第一步：安装依赖（2分钟）

```bash
cd llamareport-backend
pip install -r requirements.txt
```

新增的依赖包会自动安装：
- ✅ tushare - 金融数据
- ✅ requests - HTTP请求
- ✅ beautifulsoup4 - 网页解析
- ✅ lxml - HTML解析

---

### 第二步：配置环境（3分钟，可选）

#### 方案A：最简单（无需配置）

**不做任何配置**，系统会自动使用**免费的新浪财经**数据源。

```bash
# 直接启动即可
python main.py
```

#### 方案B：推荐配置（免费）

1. 访问 https://tushare.pro/register 注册（免费）
2. 登录后在"个人中心"获取 Token
3. 编辑 `.env` 文件添加：

```env
TUSHARE_API_TOKEN=你的Token
ENABLE_REALTIME_DATA=true
```

**优势**: 数据更全面，支持财务指标和公告查询

---

### 第三步：启动服务（1分钟）

```bash
python main.py
```

看到以下输出表示成功：
```
✅ LlamaReport Backend 启动完成
✅ 加载了 5 个实时数据工具
```

---

## 🎯 立即体验

### 方式1：运行演示脚本

```bash
python examples/realtime_data_demo.py
```

按提示选择演示项目：
- 1️⃣ 直接使用工具
- 2️⃣ 通过 Agent 使用  
- 3️⃣ 使用 REST API
- 4️⃣ 数据源对比

---

### 方式2：快速诊断

```bash
python quick_start_realtime.py
```

这个脚本会：
- ✅ 检查依赖
- ✅ 检查配置
- ✅ 测试数据源
- ✅ 测试工具
- ✅ 给出建议

---

### 方式3：访问 API 文档

浏览器打开：
```
http://localhost:8000/docs
```

找到 `realtime` 标签，在线测试所有接口。

---

### 方式4：命令行测试

```bash
# 1. 健康检查
curl http://localhost:8000/realtime/health

# 2. 查询实时股价
curl http://localhost:8000/realtime/quote/600519.SH

# 3. 通过 Agent 查询
curl -X POST http://localhost:8000/agent/query \
  -H "Content-Type: application/json" \
  -d '{"question": "贵州茅台现在多少钱？"}'
```

---

## 💡 典型使用场景

### 场景1：查询实时股价

**问题**: "帮我查一下贵州茅台现在的股价"

**系统会**:
1. 调用 `get_realtime_stock_price` 工具
2. 从新浪财经获取实时数据
3. 返回格式化的股价信息

**预期响应**:
```
📊 贵州茅台 (600519.SH) 实时行情

💰 最新价: 1,685.00 元 (+0.91%)
📈 成交量: 125,680 手
💎 市盈率: 35.2
```

---

### 场景2：综合投资分析

**问题**: "贵州茅台值得投资吗？给我做个全面分析"

**系统会**:
1. 从年报查询历史业绩
2. 获取实时股价和估值
3. 查看最新新闻动态
4. 检查异常预警
5. 综合分析给出建议

**预期响应**:
```
📊 贵州茅台投资分析

【历史表现】（2023年报）
✅ 营收增长 15.2%
✅ ROE 32.5%

【当前状况】（实时数据）
✅ 股价 1,685元
✅ PE 35.2倍（合理）

【最新动态】
✅ 业绩超预期
✅ 新品发布

【风险评估】
✅ 无异常预警

【投资建议】
评分: ⭐⭐⭐⭐ (8.5/10)
建议: 可以关注
```

---

## 📚 文档导航

根据您的需求选择对应文档：

### 🔰 我是新手
→ 阅读 `REALTIME_DATA_GUIDE.md`
- 完整的入门指南
- 配置步骤详解
- 常见问题解答

### 📖 我想看示例
→ 阅读 `REALTIME_FEATURE_EXAMPLES.md`
- 10+ 个实际示例
- Agent 问答示例
- 高级应用场景

### 🔧 我要升级现有系统
→ 阅读 `UPGRADE_TO_REALTIME.md`
- 详细升级步骤
- 配置对比
- 回滚方案

### 📊 我想了解技术细节
→ 阅读 `REALTIME_IMPLEMENTATION_REPORT.md`
- 完整技术报告
- 架构设计
- 代码分析

### ✅ 我要检查完成度
→ 阅读 `REALTIME_FEATURE_CHECKLIST.md`
- 功能清单
- 代码统计
- 质量检查

### 📝 我要了解代码变更
→ 阅读 `CODE_CHANGES_SUMMARY.md`
- 详细的文件清单
- 变更内容
- Git 提交建议

---

## ⚠️ 常见问题速查

### Q: 必须配置 Tushare Token 吗？

**A**: ❌ 不必须。不配置会自动使用新浪财经（免费）。

---

### Q: 实时数据准确吗？

**A**: ✅ 准确。
- 新浪财经: 延迟 < 3 秒
- Tushare: 官方数据，延迟 < 5 秒

---

### Q: 会不会很贵？

**A**: ❌ 不贵，甚至可以完全免费。
- 免费方案: ¥0/月（新浪财经）
- 推荐方案: ¥0/月（Tushare 免费版）
- 专业方案: ¥500-1000/月（Tushare Pro）

---

### Q: 会影响现有功能吗？

**A**: ❌ 不会。100% 向后兼容，所有现有功能不受影响。

---

### Q: 如何知道功能是否正常？

**A**: 运行诊断脚本：
```bash
python quick_start_realtime.py
```

---

### Q: 出问题了怎么办？

**A**: 
1. 查看日志: `llamareport-backend.log`
2. 检查健康: `curl http://localhost:8000/realtime/health`
3. 查看文档: 每个文档都有"故障排除"章节
4. 运行诊断: `python quick_start_realtime.py`

---

## 🎉 开始探索

### 推荐操作流程

```
1️⃣ 安装依赖
   pip install -r requirements.txt

2️⃣ 运行诊断（可选）
   python quick_start_realtime.py

3️⃣ 启动服务
   python main.py

4️⃣ 运行演示
   python examples/realtime_data_demo.py

5️⃣ 访问文档
   http://localhost:8000/docs

6️⃣ 开始使用
   尝试问 Agent: "贵州茅台现在值得投资吗？"
```

---

## 📞 获取帮助

### 文档资源（优先查看）

- 🔰 入门: `REALTIME_DATA_GUIDE.md`
- 📖 示例: `REALTIME_FEATURE_EXAMPLES.md`
- 🔧 升级: `UPGRADE_TO_REALTIME.md`

### 诊断工具

```bash
# 快速诊断
python quick_start_realtime.py

# 完整演示
python examples/realtime_data_demo.py

# 工具测试
python -c "from agents.realtime_tools import test_realtime_tools; test_realtime_tools()"
```

### 在线资源

- API 文档: http://localhost:8000/docs
- 健康检查: http://localhost:8000/realtime/health
- 统计信息: http://localhost:8000/realtime/statistics

---

## 🌟 特别提示

### ✨ 最大优势

1. **完全免费可用** - 不配置任何 Token 也能用
2. **零学习成本** - Agent 自动选择工具
3. **即时见效** - 安装依赖即可使用
4. **功能强大** - 历史+实时双重分析

### ⚡ 立即尝试

最快体验方式：
```bash
# 1. 安装
pip install -r requirements.txt

# 2. 启动
python main.py

# 3. 测试（新开终端）
curl http://localhost:8000/realtime/quote/600000.SH
```

**30 秒即可看到效果！** 🎯

---

**祝您使用愉快！** 🎊

有任何问题，请查看文档或运行诊断脚本。

