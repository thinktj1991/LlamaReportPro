# 🧪 新功能测试指南

## 📋 测试前准备

### 1. 启动后端服务
```bash
cd llamareport-backend
python main.py
```

### 2. 访问前端界面
打开浏览器访问: **http://localhost:8000**

---

## ✅ 测试项目

### 测试1: 文件删除功能

#### 1.1 单个文件删除
**步骤:**
1. 上传一个PDF文件
2. 在文件列表中找到该文件
3. 点击文件右侧的红色"删除"按钮
4. 在确认对话框中点击"确定"

**预期结果:**
- ✅ 弹出确认对话框
- ✅ 确认后文件被删除
- ✅ 文件列表自动刷新
- ✅ 显示"文件删除成功"的提示

#### 1.2 批量删除
**步骤:**
1. 上传3个PDF文件
2. 勾选其中2个文件的复选框
3. 点击顶部的"删除选中文件"按钮
4. 在确认对话框中点击"确定"

**预期结果:**
- ✅ 弹出确认对话框,显示要删除的文件数量
- ✅ 确认后选中的文件被删除
- ✅ 文件列表自动刷新
- ✅ 显示删除结果(成功/失败数量)

---

### 测试2: 批量处理功能

#### 2.1 批量处理多个文件
**步骤:**
1. 上传3个不同公司的年报PDF
2. 勾选这3个文件
3. 点击"批量处理选中文件"按钮
4. 等待处理完成

**预期结果:**
- ✅ 弹出确认对话框
- ✅ 显示"正在处理X个文件..."的提示
- ✅ 处理完成后显示详细结果:
  - 总文件数
  - 成功/失败数量
  - 提取的表格数量
  - 索引构建状态
- ✅ 可以展开查看每个文件的详细结果

#### 2.2 跨文档查询
**步骤:**
1. 完成上述批量处理
2. 在问答区域输入跨文档问题,例如:
   - "对比这三家公司的营业收入"
   - "哪家公司的净利润最高?"

**预期结果:**
- ✅ 系统能够理解跨文档查询
- ✅ 返回包含多个公司信息的答案
- ✅ 答案中包含来源引用

---

### 测试3: 文件选择功能

#### 3.1 全选功能
**步骤:**
1. 上传5个PDF文件
2. 点击"全选"复选框

**预期结果:**
- ✅ 所有文件的复选框都被选中
- ✅ "全选"复选框显示为选中状态

#### 3.2 取消全选
**步骤:**
1. 在全选状态下
2. 再次点击"全选"复选框

**预期结果:**
- ✅ 所有文件的复选框都被取消选中
- ✅ "全选"复选框显示为未选中状态

#### 3.3 部分选择
**步骤:**
1. 上传5个文件
2. 手动勾选其中3个文件

**预期结果:**
- ✅ 只有选中的3个文件被勾选
- ✅ "全选"复选框保持未选中状态

---

### 测试4: UI交互

#### 4.1 批量操作栏显示
**步骤:**
1. 访问页面(无文件)
2. 上传第一个文件

**预期结果:**
- ✅ 无文件时,批量操作栏隐藏
- ✅ 上传文件后,批量操作栏显示

#### 4.2 删除按钮样式
**步骤:**
1. 鼠标悬停在删除按钮上

**预期结果:**
- ✅ 按钮颜色变化
- ✅ 按钮有向上移动的动画效果
- ✅ 按钮有阴影效果

#### 4.3 文件列表布局
**步骤:**
1. 上传多个文件
2. 观察文件列表

**预期结果:**
- ✅ 每个文件项包含:复选框、文件名、文件大小、删除按钮
- ✅ 布局清晰,信息易读
- ✅ 文件项之间有适当间距

---

### 测试5: 错误处理

#### 5.1 未选择文件时批量处理
**步骤:**
1. 不勾选任何文件
2. 点击"批量处理选中文件"

**预期结果:**
- ✅ 显示错误提示:"请先选择要处理的文件"
- ✅ 不执行处理操作

#### 5.2 未选择文件时批量删除
**步骤:**
1. 不勾选任何文件
2. 点击"删除选中文件"

**预期结果:**
- ✅ 显示错误提示:"请先选择要删除的文件"
- ✅ 不执行删除操作

#### 5.3 删除不存在的文件
**步骤:**
1. 手动调用删除API,删除不存在的文件

**预期结果:**
- ✅ 返回404错误
- ✅ 显示"文件不存在"的错误提示

---

### 测试6: 性能测试

#### 6.1 批量处理性能
**步骤:**
1. 上传10个PDF文件(最大限制)
2. 全选并批量处理

**预期结果:**
- ✅ 系统能够处理10个文件
- ✅ 处理过程中显示进度提示
- ✅ 处理完成后显示详细结果

#### 6.2 批量删除性能
**步骤:**
1. 上传10个文件
2. 全选并批量删除

**预期结果:**
- ✅ 系统能够删除10个文件
- ✅ 删除过程中显示进度提示
- ✅ 删除完成后显示结果统计

---

## 🐛 已知问题

### 无已知问题
目前没有发现问题,如有问题请及时反馈。

---

## 📊 测试检查清单

### 功能测试
- [ ] 单个文件删除
- [ ] 批量文件删除
- [ ] 批量文件处理
- [ ] 跨文档查询
- [ ] 全选功能
- [ ] 部分选择功能

### UI测试
- [ ] 批量操作栏显示/隐藏
- [ ] 删除按钮样式和动画
- [ ] 文件列表布局
- [ ] 复选框样式

### 错误处理
- [ ] 未选择文件的错误提示
- [ ] 文件不存在的错误处理
- [ ] 删除确认对话框

### 性能测试
- [ ] 批量处理10个文件
- [ ] 批量删除10个文件
- [ ] 跨文档查询响应速度

---

## 📝 测试报告模板

### 测试环境
- 操作系统: ___________
- 浏览器: ___________
- 后端版本: ___________

### 测试结果
| 测试项 | 状态 | 备注 |
|--------|------|------|
| 单个文件删除 | ✅/❌ | |
| 批量文件删除 | ✅/❌ | |
| 批量文件处理 | ✅/❌ | |
| 跨文档查询 | ✅/❌ | |
| 全选功能 | ✅/❌ | |
| UI交互 | ✅/❌ | |
| 错误处理 | ✅/❌ | |
| 性能测试 | ✅/❌ | |

### 发现的问题
1. ___________
2. ___________
3. ___________

### 改进建议
1. ___________
2. ___________
3. ___________

---

## 🎯 测试完成标准

### 必须通过的测试
1. ✅ 单个文件删除功能正常
2. ✅ 批量删除功能正常
3. ✅ 批量处理功能正常
4. ✅ 跨文档查询功能正常
5. ✅ 所有错误提示正常显示
6. ✅ UI交互流畅,无明显卡顿

### 可选测试
1. 性能优化测试
2. 边界条件测试
3. 兼容性测试(不同浏览器)

---

**测试愉快! 🎉**

